/* Theme tokens copied / adapted from exampleApp/COPY_ME.md */
:root {
  /* Lover Era Color Palette (adapted) */
  --background: 340 100% 98%;
  --foreground: 340 15% 25%;
  /* Brand burgundy for headings/accents matching landing page */
  --brand-fg: 334 46% 33%;

  --card: 340 100% 99%;
  --card-foreground: 340 15% 25%;

  --primary: 330 85% 70%;
  --primary-foreground: 0 0% 100%;

  --secondary: 280 60% 85%;
  /* Legacy muted kept for backward-compat (used as light bg) */
  --muted: 320 40% 95%;
  /* Split muted tokens */
  --muted-bg: 320 40% 95%;   /* light bg for chips/surfaces */
  --muted-fg: 340 12% 40%;   /* mid-tone muted text */

  --border: 320 30% 90%;
  --input: 320 30% 95%;
  --ring: 330 85% 70%;

  /* Gradients */
  --gradient-lover: linear-gradient(135deg, hsl(330, 85%, 70%), hsl(280, 70%, 75%), hsl(200, 70%, 80%));
  --gradient-dreamy: linear-gradient(180deg, hsl(340, 100%, 98%), hsl(320, 40%, 95%));
  --gradient-card: linear-gradient(145deg, hsl(340, 100%, 99%), hsl(320, 60%, 97%));
  --gradient-hero: linear-gradient(135deg, hsl(330, 85%, 70%) 0%, hsl(280, 70%, 75%) 50%, hsl(200, 70%, 80%) 100%);

  /* Shadows */
  --shadow-dreamy: 0 10px 30px -5px rgba(198,166,255,0.2);
  --shadow-card: 0 4px 20px -2px rgba(198,166,255,0.15);

  --radius: 0.5rem;
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --primary: 210 40% 98%;
}

/* Global typography */
html, body {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}
/* Headings use Poppins for brand tone */
h1, h2, h3, h4, h5, h6, .cook-title, .hero-title {
  font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}
/* Prevent background scroll when a modal is open */
/* Stronger background scroll lock for iOS Safari / PWA */
html.modal-open, body.modal-open {
  overflow: hidden;
  height: 100%;
  width: 100%;
  overscroll-behavior: contain;
}

/* Utility classes used by the Hero component */
.hero-card {
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  color: hsl(var(--foreground));
  padding: clamp(14px, 3vw, 22px);
  text-align: center;
  border-radius: 14px;
  box-shadow: var(--shadow-card);
  max-width: 1040px;
  margin: 20px auto 10px;
  position: relative;
}
.hero-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  border-top-left-radius: 14px;
  border-top-right-radius: 14px;
  background: linear-gradient(90deg, hsl(330 85% 75%), hsl(280 70% 78%), hsl(200 70% 80%));
  opacity: 0.9;
}
.hero-inner { max-width: 920px; margin: 0 auto; }
.hero-top { display:flex; justify-content:flex-end; align-items:center; padding: 6px 4px; padding-top: calc(env(safe-area-inset-top, 0px) + 6px); }
.hero-title { font-family: 'Pacifico', cursive; font-size: clamp(22px, 3.6vw, 36px); line-height: 1.05; margin: 0; text-shadow: none; color: hsl(var(--brand-fg)); }
.hero-tagline { margin-top: 8px; font-size: clamp(14px, 2.2vw, 16px); opacity: 0.9; }
.hero-emoji { transform: translateY(-1px); }
.hero-cta-ghost { margin-top: 10px; display:inline-flex; align-items:center; gap:0.5rem; padding: 0.55rem 0.9rem; border-radius:999px; font-weight:700; }

@media (max-width: 480px) {
  .hero-card { padding: 12px; margin: 10px 12px 8px; }
  .hero-title { font-size: clamp(20px, 7.2vw, 28px); }
  .hero-tagline { font-size: 14px; }
}

/* Modal */
.modal-backdrop {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  /* Subtle blur adds depth in PWA; graceful fallback if unsupported */
  background: rgba(12,10,12,0.35);
  -webkit-backdrop-filter: saturate(160%) blur(6px);
  backdrop-filter: saturate(160%) blur(6px);
  /* Respect safe areas so rounded modals don't kiss the edges/notch */
  padding: 1rem;
  padding-top: calc(env(safe-area-inset-top, 0px) + 1rem);
  padding-right: calc(env(safe-area-inset-right, 0px) + 1rem);
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 1rem);
  padding-left: calc(env(safe-area-inset-left, 0px) + 1rem);
  z-index: 1000;
  overscroll-behavior: contain;
}
.modal {
  width: 100%;
  max-width: 760px;
  /* Give the modal a proper surface; avoids see-through edges on iOS */
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  background-clip: padding-box;
  border-radius: calc(var(--radius) + 0.25rem);
  padding: 1rem 1rem 0.75rem 1rem;
  box-shadow: var(--shadow-card);
  position: relative;
  color: hsl(var(--card-foreground));
  /* Reliable viewport sizing across iOS PWA and browsers */
  max-height: min(90svh, 90vh);
  overflow: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}
.modal:focus { outline: none; }
/* grabber styles removed per design */
.modal-header { 
  position: sticky; 
  top: calc(env(safe-area-inset-top, 0px) + 0px);
  display: flex; 
  align-items: center; 
  gap: 8px;
  justify-content: space-between; 
  padding: 8px 0; 
  margin-bottom: 8px;
  background: hsl(var(--card));
  border-bottom: 1px solid hsl(var(--border));
  z-index: 2;
}
.modal-close {
  position: absolute;
  /* Keep the close button clear of notches/home indicator in PWA */
  top: calc(env(safe-area-inset-top, 0px) + 12px);
  right: calc(env(safe-area-inset-right, 0px) + 12px);
  border: none;
  background: hsl(var(--card));
  width: 36px; height: 36px;
  display:inline-grid; place-items:center;
  border-radius: 999px;
  font-size: 1.05rem; line-height: 1;
  color: hsl(var(--foreground));
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}
.modal-close:focus { outline: none; }
.modal-close:focus-visible { outline: 2px solid hsl(var(--ring)); outline-offset: 2px; }
.modal-close:hover { transform: translateY(-1px); box-shadow: 0 10px 28px rgba(0,0,0,0.08) }
.form-field { display: block; margin-bottom: 0.6rem; }
.form-label { display:block; font-weight:700; margin-bottom:0.25rem; font-size:0.95rem }
.required-asterisk { color: hsl(var(--primary)); margin-left:0.25rem }
input[type="text"], input[type="file"], input, textarea, select { width: 100%; box-sizing: border-box; padding: 0.5rem 0.65rem; border-radius: 10px; border: 1px solid hsl(var(--border)); background: hsl(var(--input)); font-size: 0.95rem }
textarea { min-height: 92px; }
.image-preview-wrap { margin-bottom: 0.7rem; }
.modal-image-preview { max-width: 100%; border-radius: 10px; display:block }
.grid-two { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; align-items: end; }

/* Cook / view modal specific styling */
.cook-modal { max-width: 900px; max-height: min(90svh, 90vh); overflow:auto; padding: 1rem; -webkit-overflow-scrolling: touch; }
/* Sticky actions-only bar; placed at top of modal content */
.cook-actions-sticky { position: sticky; top: calc(env(safe-area-inset-top, 0px) + 2px); display: block; width: max-content; margin-left: auto; padding: 0; background: transparent; z-index: 5; }
.cook-title { margin: 0; font-size: 1.25rem; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.cook-title { color: hsl(var(--brand-fg)); }
.cook-toolbar-actions { display:flex; gap:8px; align-items:center; background: hsl(var(--card)); padding: 6px; border-radius: 12px; box-shadow: 0 8px 22px rgba(0,0,0,0.08); }
.cook-close-fab { position: static; border: none; background: hsl(var(--card)); width: 36px; height: 36px; display:inline-grid; place-items:center; border-radius: 10px; font-size: 1rem; cursor: pointer; box-shadow: 0 8px 22px rgba(0,0,0,0.08); }
.cook-toolbar-actions button:focus { outline: none }
.cook-toolbar-actions button:focus-visible { outline: 2px solid hsl(var(--ring)); outline-offset: 2px }
.cook-close-fab:hover { background: hsl(var(--muted-bg)); }
.cook-edit-btn { border: none; background: hsl(var(--primary)); color: hsl(var(--primary-foreground)); width: 36px; height: 36px; display:inline-grid; place-items:center; border-radius: 10px; font-size: 0.95rem; cursor: pointer; box-shadow: 0 6px 18px rgba(0,0,0,0.08); }
.cook-edit-btn svg { width:18px; height:18px; }
.cook-edit-btn:hover { filter: brightness(0.98); }
/* Cook mode toggle */
.cook-mode-btn { border: none; background: transparent; color: hsl(var(--foreground)); width: 36px; height: 36px; display:inline-grid; place-items:center; border-radius: 8px; font-size: 0.95rem; cursor: pointer; }
.cook-mode-btn svg { width:18px; height:18px; }
.cook-mode-btn:hover { background: hsl(var(--muted-bg)); }

/* Active cook-mode: fullscreen, larger type, hide decorative image */
.cook-modal.cook-mode-active { max-width: none; width: 100%; height: 100svh; max-height: none; border-radius: 0; padding: 1.25rem 1.5rem; padding-top: calc(env(safe-area-inset-top, 0px) + 1.25rem); padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 1.25rem); }
.cook-modal.cook-mode-active .cook-image { display: none; }
.cook-modal.cook-mode-active .cook-content { font-size: 1.15rem; line-height: 1.6 }
.cook-modal.cook-mode-active .cook-tags { display: none; }

.cook-header { display:block; margin-bottom:12px; padding-top: 6px; }
.cook-image { width: 240px; max-width: 100%; height: 160px; border-radius: 12px; object-fit: cover; box-shadow: var(--shadow-card); display: block; margin: 8px 0; }
.cook-summary-row { display:flex; gap: 12px; align-items: flex-start; margin-top: 4px; }
.cook-summary { flex: 1 1 auto; min-width: 0; }
.cook-meta { color: hsl(var(--muted-fg)); font-weight:600; font-size:0.95rem; margin-top: 2px }
.cook-content h2 { font-size: 1.5rem; margin:0; }

/* Tighten default fullscreen cook padding so the toolbar sits closer to the top on mobile */
.cook-fullscreen {
  padding: 10px 12px;
  padding-top: calc(env(safe-area-inset-top, 0px) + 8px);
}
.cook-content h3 { font-size: 1.05rem; margin: 0.6rem 0 0.4rem 0 }
.cook-content p { color: hsl(var(--foreground)); margin: 0.35rem 0 }
.cook-tags { display:flex; gap:8px; flex-wrap:wrap; margin-top:6px }
.cook-tags .tag { background: hsl(var(--muted-bg)); color: hsl(var(--brand-fg)); padding:6px 8px; border-radius:999px }
.cook-content h3 { margin-top:0 }

@media (max-width: 640px) {
  .cook-summary-row { flex-direction: column; }
}

/* When image exists on small screens, push content down so top buttons don't overlap */
@media (max-width: 640px) {
  .cook-modal .cook-image { display:block }
  .cook-modal .cook-content { padding-top: 54px; }
}

/* Align labels + inputs in-line for denser appearance on medium+ screens */
@media (min-width: 720px) {
  .form-field.inline { display: grid; grid-template-columns: 130px 1fr; gap: 12px; align-items: center; }
  .form-field.inline .form-label { margin: 0 }
  .form-field.inline input, .form-field.inline textarea, .form-field.inline select { margin: 0 }
}

/* Shared tag styles (chips) */
.tag { display:inline-flex; align-items:center; gap:6px; background: hsl(var(--muted-bg)); color: hsl(var(--brand-fg)); padding:6px 8px; border-radius:999px }
.btn-ghost { background: transparent; border: 1px solid transparent; padding:6px 8px; border-radius:8px; cursor:pointer }
.modal-actions { display:flex; align-items:center; justify-content:flex-end; gap:10px; margin-top: 0.65rem }

/* Make primary (Save) expand to take most of the available width and keep Cancel to the right */
.modal-actions .primary { flex: 1 1 auto; padding: 0.85rem 1rem; border-radius: 10px; font-weight:700; }
.modal-actions .btn-cancel { flex: 0 0 auto; padding: 0.7rem 0.9rem; border-radius: 10px; border: 1px solid hsl(var(--border)); background: transparent; cursor: pointer; }
.modal-actions .btn-cancel:hover { background: hsl(var(--muted-bg)); }

/* Responsive: stack grid on smaller screens */
@media (max-width: 640px) {
  .modal { padding: 1rem }
  .grid-two { grid-template-columns: 1fr; }
  .modal { max-width: 520px; max-height: min(90svh, 90vh) }
}

/* Dark-scheme backdrop balance (less milky) */
@media (prefers-color-scheme: dark) {
  .modal-backdrop { background: rgba(8,8,10,0.45); }
}

/* Standalone (PWA) mode: ensure safe-area padding even if browser bars are gone */
@media (display-mode: standalone) {
  .modal-backdrop {
    padding-top: calc(env(safe-area-inset-top, 0px) + 1rem);
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 1rem);
  }
}

/* Amplify UI theming to align with app colors */
:root, .amplify-theme { --amplify-components-button-primary-background-color: hsl(var(--primary)); --amplify-components-button-primary-color: hsl(var(--primary-foreground)); --amplify-components-button-link-color: hsl(var(--brand-fg)); --amplify-components-fieldcontrol-background-color: hsl(var(--input)); --amplify-components-tabs-item-active-color: hsl(var(--brand-fg)); --amplify-components-tabs-item-color: hsl(var(--muted-fg)); --amplify-components-heading-color: hsl(var(--brand-fg)); }
.amplify-card { background: hsl(var(--card)) !important; border: 1px solid hsl(var(--border)) !important; color: hsl(var(--foreground)) !important; box-shadow: var(--shadow-card) !important; }
.amplify-input, .amplify-select, .amplify-textarea { background: hsl(var(--input)) !important; border-color: hsl(var(--border)) !important; }
.amplify-tabs__list { border-color: hsl(var(--border)) !important; }
.amplify-alert__heading, .amplify-alert__body { color: hsl(var(--foreground)) !important; }

